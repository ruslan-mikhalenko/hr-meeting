<!-- <script setup>
import AuthenticatedLayout from "@/Layouts/AuthenticatedLayout.vue";
import { Head } from "@inertiajs/vue3";
</script>

<template>
  <Head title="Dashboard" />

  <AuthenticatedLayout>
    <template #header>
      <h2 class="font-semibold text-xl text-gray-800 leading-tight">
        Dashboard
      </h2>
    </template>

    <div class="py-12">
      <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
        <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
          <div class="p-6 text-gray-900">You're logged in!</div>
        </div>
      </div>
    </div>
  </AuthenticatedLayout>
</template>
 -->

<script setup>
import { onMounted, onBeforeUnmount, ref } from "vue";

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ base64-–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Unicode
function b64EncodeUnicode(str) {
  return btoa(
    encodeURIComponent(str).replace(/%([0-9A-F]{2})/g, (match, p1) =>
      String.fromCharCode("0x" + p1)
    )
  );
}

// –ü–∞—Ä–∞–º–µ—Ç—Ä—ã
const userId = 123;
const orderId = 456;
const channel = "–¢–µ—Å—Ç";

// –°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–π payload
const rawPayload = `site_join|user=${userId}|order=${orderId}|channel=${channel}`;
const payload = b64EncodeUnicode(rawPayload);

// –û–±—ä—è–≤–ª—è–µ–º –∫–∞–∫ `ref`, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤ —à–∞–±–ª–æ–Ω–µ –∏ —Ñ—É–Ω–∫—Ü–∏—è—Ö
const channelUrl = ref(`https://t.me/TelegaBoostTest_bot?start=${payload}`);

// –ö–Ω–æ–ø–∫–∞ —Ä—É—á–Ω–æ–≥–æ —Ä–µ–¥–∏—Ä–µ–∫—Ç–∞
function redirectToChannel() {
  console.log("–ü–µ—Ä–µ—Ö–æ–¥ –ø–æ –∫–Ω–æ–ø–∫–µ –Ω–∞:", channelUrl.value);
  window.location.href = channelUrl.value;
}

// –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç
onMounted(() => {
  console.log("–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–∞. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ —Ä–µ–¥–∏—Ä–µ–∫—Ç—É...");
  /* setTimeout(() => {
    console.log("–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞:", channelUrl.value);
    window.location.href = channelUrl.value;
  }, 15000); */

  addYandexMetrika();
});

// –Ø–Ω–¥–µ–∫—Å.–ú–µ—Ç—Ä–∏–∫–∞
function addYandexMetrika() {
  (function (m, e, t, r, i, k, a) {
    m[i] =
      m[i] ||
      function () {
        (m[i].a = m[i].a || []).push(arguments);
      };
    m[i].l = 1 * new Date();
    for (var j = 0; j < document.scripts.length; j++) {
      if (document.scripts[j].src === r) {
        return;
      }
    }
    (k = e.createElement(t)),
      (a = e.getElementsByTagName(t)[0]),
      (k.async = 1),
      (k.src = r),
      a.parentNode.insertBefore(k, a);
  })(window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

  ym(101725200, "init", {
    clickmap: true,
    trackLinks: true,
    accurateTrackBounce: true,
  });
}

onBeforeUnmount(() => {
  console.log("–£—Ö–æ–¥ —Å–æ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.");
});
</script>

<template>
  <!-- –ì–ª–∞–≤–Ω—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä -->
  <div class="flex flex-col min-h-screen">
    <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
    <main class="flex-grow">
      <div class="py-12">
        <div class="max-w-7xl mx-auto sm:px-6 lg:px-8">
          <div class="bg-white overflow-hidden shadow-sm sm:rounded-lg">
            <div class="px-6 pt-6 text-gray-800 text-center">
              <!-- <h2 class="text-xl font-bold mb-2">üöÄ –ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –¥–æ—Å—Ç—É–ø</h2> -->

              <!-- <p class="text-base">–ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º</p>

              <p class="text-base">
                üöÄ –°–µ–π—á–∞—Å –≤—ã –ø–µ—Ä–µ–π–¥—ë—Ç–µ –≤ Telegram-–±–æ—Ç–∞,<br />
                üëâ –≥–¥–µ, –Ω–∞–∂–∞–≤ –∫–Ω–æ–ø–∫—É <strong>¬´Start¬ª</strong> –≤–Ω–∏–∑—É —ç–∫—Ä–∞–Ω–∞, –≤—ã
                –ø–æ–ª—É—á–∏—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –∫–∞–Ω–∞–ª –¢–µ—Å—Ç –∏ —Å–º–æ–∂–µ—Ç–µ –ø—Ä–∏—Å–æ–µ–¥–∏–Ω–∏—Ç—å—Å—è –∫ –Ω–µ–º—É.
              </p>
              <p class="text-sm mt-2 text-gray-500">
                –ï—Å–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–µ –Ω–∞—á–∞–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.
              </p> -->

              <p class="text-base">–ö—Ä–∞—Ç–∫–æ–µ –Ω–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º</p>

              <p class="text-base">
                üîî –ü–æ–¥–ø–∏—à–∏—Ç–µ—Å—å –Ω–∞ –∫–∞–Ω–∞–ª –≤ Telegram <br />
                –ü—Ä—è–º–æ–π –ø–µ—Ä–µ—Ö–æ–¥ –∫ –ø–æ–¥–ø–∏—Å–∫–µ –∑–∞–π–º—ë—Ç –≤—Å–µ–≥–æ –ø–∞—Ä—É —Å–µ–∫—É–Ω–¥!

                <p>üëá –ù–∞–∂–º–∏—Ç–µ ¬´Start¬ª –Ω–∏–∂–µ, —á—Ç–æ–±—ã –ø–æ–¥–ø–∏—Å–∞—Ç—å—Å—è –Ω–∞ –∫–∞–Ω–∞–ª</p>
<p>üì≤ –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É ¬´Start¬ª ‚Äî –∏ –±–æ—Ç –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –¥–∞—Å—Ç —Å—Å—ã–ª–∫—É –Ω–∞ –Ω–∞—à –∫–∞–Ω–∞–ª ¬´–¢–µ—Å—Ç¬ª.</p>
              </p>
              <p class="text-sm mt-2 text-gray-500">
                –ï—Å–ª–∏ –ø–µ—Ä–µ—Ö–æ–¥ –Ω–µ –Ω–∞—á–∞–ª—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ ‚Äî –Ω–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ.
              </p>
            </div>

            <div class="p-6 text-gray-900 text-center text-lg font-semibold">
              –†–µ–¥–∏—Ä–µ–∫—Ç –∫ –ø–æ–¥–ø–∏—Å–∫–µ —á–µ—Ä–µ–∑ 15 —Å–µ–∫—É–Ω–¥—ã...
            </div>
            <!-- –¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–ª–æ–∂–µ–Ω–∏–µ –∫–Ω–æ–ø–∫–∏ -->
            <div class="flex justify-center items-center mt-6">
              <button
                @click="redirectToChannel"
                class="px-6 py-3 bg-blue-600 text-white text-lg font-semibold rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500"
              >
                –ü–µ—Ä–µ–π—Ç–∏ –∫ –ø–æ–¥–ø–∏—Å–∫–µ –Ω–∞ –∫–∞–Ω–∞–ª
              </button>
            </div>
          </div>
        </div>
      </div>
    </main>
    <!-- –§—É—Ç–µ—Ä -->
    <footer
      class="border-t border-gray-300 py-4 text-center text-sm text-gray-600"
    >
      <p>–ò–ü –¢–µ—Å—Ç ‚Ä¢ –ò–ù–ù: 43242472575</p>
    </footer>
  </div>
</template>

